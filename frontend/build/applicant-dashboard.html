<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Applicant Dashboard - Interview Test Platform</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n        \n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);\n            min-height: 100vh;\n        }\n        \n        .header {\n            background: rgba(255, 255, 255, 0.9);\n            backdrop-filter: blur(10px);\n            padding: 20px 0;\n            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n            margin-bottom: 30px;\n        }\n        \n        .header-content {\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 0 20px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n        }\n        \n        .header h1 {\n            font-size: 28px;\n            color: #1a202c;\n        }\n        \n        .header p {\n            color: #718096;\n            margin-top: 4px;\n        }\n        \n        .logout-btn {\n            padding: 8px 16px;\n            background: #f56565;\n            color: white;\n            border: none;\n            border-radius: 8px;\n            cursor: pointer;\n            font-weight: 500;\n        }\n        \n        .container {\n            max-width: 1200px;\n            margin: 0 auto;\n            padding: 0 20px;\n        }\n        \n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 24px;\n            margin-bottom: 40px;\n        }\n        \n        .stat-card {\n            background: rgba(255, 255, 255, 0.9);\n            backdrop-filter: blur(10px);\n            border-radius: 16px;\n            padding: 24px;\n            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n        }\n        \n        .stat-card h3 {\n            font-size: 16px;\n            color: #718096;\n            margin-bottom: 8px;\n        }\n        \n        .stat-card .number {\n            font-size: 32px;\n            font-weight: bold;\n            color: #1a202c;\n        }\n        \n        .tests-section {\n            background: rgba(255, 255, 255, 0.9);\n            backdrop-filter: blur(10px);\n            border-radius: 16px;\n            padding: 32px;\n            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n            margin-bottom: 40px;\n        }\n        \n        .tests-section h2 {\n            font-size: 24px;\n            color: #1a202c;\n            margin-bottom: 24px;\n        }\n        \n        .test-item {\n            padding: 20px;\n            border: 1px solid #e2e8f0;\n            border-radius: 12px;\n            margin-bottom: 16px;\n            background: rgba(255, 255, 255, 0.5);\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n        }\n        \n        .test-info h3 {\n            color: #1a202c;\n            margin-bottom: 8px;\n        }\n        \n        .test-info p {\n            color: #718096;\n            font-size: 14px;\n            margin: 4px 0;\n        }\n        \n        .test-actions {\n            display: flex;\n            flex-direction: column;\n            gap: 8px;\n        }\n        \n        .btn {\n            padding: 8px 16px;\n            border: none;\n            border-radius: 8px;\n            cursor: pointer;\n            font-weight: 500;\n            text-decoration: none;\n            text-align: center;\n            transition: all 0.2s;\n        }\n        \n        .btn-primary {\n            background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);\n            color: white;\n        }\n        \n        .btn-secondary {\n            background: #e2e8f0;\n            color: #4a5568;\n        }\n        \n        .status-badge {\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 12px;\n            font-weight: 600;\n            text-transform: uppercase;\n        }\n        \n        .status-scheduled {\n            background: #bee3f8;\n            color: #2b6cb0;\n        }\n        \n        .status-completed {\n            background: #c6f6d5;\n            color: #22543d;\n        }\n        \n        .status-in-progress {\n            background: #fed7d7;\n            color: #c53030;\n        }\n        \n        .progress-bar {\n            width: 100%;\n            height: 8px;\n            background: #e2e8f0;\n            border-radius: 4px;\n            overflow: hidden;\n            margin: 8px 0;\n        }\n        \n        .progress-fill {\n            height: 100%;\n            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);\n            transition: width 0.3s;\n        }\n        \n        .empty-state {\n            text-align: center;\n            padding: 60px 20px;\n            color: #718096;\n        }\n        \n        .empty-state svg {\n            width: 64px;\n            height: 64px;\n            margin-bottom: 16px;\n            opacity: 0.5;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"header\">\n        <div class=\"header-content\">\n            <div>\n                <h1>Applicant Dashboard</h1>\n                <p>Welcome back, <span id=\"userName\">Applicant</span></p>\n            </div>\n            <button class=\"logout-btn\" onclick=\"logout()\">Logout</button>\n        </div>\n    </div>\n\n    <div class=\"container\">\n        <!-- Stats Grid -->\n        <div class=\"stats-grid\">\n            <div class=\"stat-card\">\n                <h3>Upcoming Tests</h3>\n                <div class=\"number\" id=\"upcomingTests\">0</div>\n            </div>\n            <div class=\"stat-card\">\n                <h3>Completed Tests</h3>\n                <div class=\"number\" id=\"completedTests\">0</div>\n            </div>\n            <div class=\"stat-card\">\n                <h3>Average Score</h3>\n                <div class=\"number\" id=\"averageScore\">0%</div>\n            </div>\n        </div>\n\n        <!-- Upcoming Tests Section -->\n        <div class=\"tests-section\">\n            <h2>Upcoming Tests</h2>\n            <div id=\"upcomingTestsList\">\n                <!-- Tests will be loaded here -->\n            </div>\n        </div>\n\n        <!-- Completed Tests Section -->\n        <div class=\"tests-section\">\n            <h2>Completed Tests</h2>\n            <div id=\"completedTestsList\">\n                <!-- Results will be loaded here -->\n            </div>\n        </div>\n    </div>\n\n    <script>\n        const API_BASE = 'https://prescreen-app.preview.emergentagent.com/api';\n        let authToken = localStorage.getItem('token');\n        let currentUser = JSON.parse(localStorage.getItem('user') || '{}');\n\n        // Check authentication\n        if (!authToken || !currentUser.role || currentUser.role !== 'applicant') {\n            window.location.href = '/working-login.html';\n        }\n\n        // Set user name\n        document.getElementById('userName').textContent = currentUser.full_name || 'Applicant';\n\n        // Initialize dashboard\n        document.addEventListener('DOMContentLoaded', async () => {\n            await loadDashboardData();\n        });\n\n        async function apiCall(endpoint, options = {}) {\n            const response = await fetch(`${API_BASE}${endpoint}`, {\n                ...options,\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${authToken}`,\n                    ...options.headers\n                }\n            });\n\n            if (!response.ok) {\n                throw new Error(`API call failed: ${response.statusText}`);\n            }\n\n            return response.json();\n        }\n\n        async function loadDashboardData() {\n            try {\n                // For now, we'll use mock data since applicant-specific endpoints aren't implemented yet\n                loadMockData();\n            } catch (error) {\n                console.error('Failed to load dashboard data:', error);\n                loadMockData();\n            }\n        }\n\n        function loadMockData() {\n            // Mock upcoming tests\n            const upcomingTests = [\n                {\n                    id: '1',\n                    title: 'Frontend Developer Assessment',\n                    scheduledDate: new Date(Date.now() + 24 * 60 * 60 * 1000), // Tomorrow\n                    duration: 90,\n                    status: 'scheduled',\n                    inviteToken: 'mock-token-1'\n                }\n            ];\n\n            // Mock completed tests\n            const completedTests = [\n                {\n                    id: '2',\n                    title: 'JavaScript Fundamentals',\n                    completedDate: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000), // Last week\n                    score: 85,\n                    status: 'completed'\n                }\n            ];\n\n            // Update stats\n            document.getElementById('upcomingTests').textContent = upcomingTests.length;\n            document.getElementById('completedTests').textContent = completedTests.length;\n            document.getElementById('averageScore').textContent = \n                completedTests.length > 0 \n                ? Math.round(completedTests.reduce((acc, test) => acc + test.score, 0) / completedTests.length) + '%'\n                : '0%';\n\n            // Load upcoming tests\n            loadUpcomingTests(upcomingTests);\n            loadCompletedTests(completedTests);\n        }\n\n        function loadUpcomingTests(tests) {\n            const container = document.getElementById('upcomingTestsList');\n            \n            if (tests.length === 0) {\n                container.innerHTML = `\n                    <div class=\"empty-state\">\n                        <svg fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fill-rule=\"evenodd\" d=\"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z\" clip-rule=\"evenodd\"></path>\n                        </svg>\n                        <h3>No Upcoming Tests</h3>\n                        <p>You don't have any scheduled tests at the moment.</p>\n                    </div>\n                `;\n                return;\n            }\n\n            container.innerHTML = tests.map(test => `\n                <div class=\"test-item\">\n                    <div class=\"test-info\">\n                        <h3>${test.title}</h3>\n                        <p>📅 Scheduled: ${test.scheduledDate.toLocaleDateString()} at ${test.scheduledDate.toLocaleTimeString()}</p>\n                        <p>⏱️ Duration: ${test.duration} minutes</p>\n                        <span class=\"status-badge status-${test.status}\">${test.status}</span>\n                    </div>\n                    <div class=\"test-actions\">\n                        <button class=\"btn btn-primary\" onclick=\"takeTest('${test.inviteToken}')\">\n                            Take Test\n                        </button>\n                        <button class=\"btn btn-secondary\" onclick=\"viewTestDetails('${test.id}')\">\n                            View Details\n                        </button>\n                    </div>\n                </div>\n            `).join('');\n        }\n\n        function loadCompletedTests(tests) {\n            const container = document.getElementById('completedTestsList');\n            \n            if (tests.length === 0) {\n                container.innerHTML = `\n                    <div class=\"empty-state\">\n                        <svg fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\"></path>\n                        </svg>\n                        <h3>No Completed Tests</h3>\n                        <p>Your completed tests will appear here.</p>\n                    </div>\n                `;\n                return;\n            }\n\n            container.innerHTML = tests.map(test => `\n                <div class=\"test-item\">\n                    <div class=\"test-info\">\n                        <h3>${test.title}</h3>\n                        <p>📅 Completed: ${test.completedDate.toLocaleDateString()}</p>\n                        <p>📊 Score: ${test.score}%</p>\n                        <div class=\"progress-bar\">\n                            <div class=\"progress-fill\" style=\"width: ${test.score}%\"></div>\n                        </div>\n                        <span class=\"status-badge status-${test.status}\">${test.status}</span>\n                    </div>\n                    <div class=\"test-actions\">\n                        <button class=\"btn btn-secondary\" onclick=\"viewResults('${test.id}')\">\n                            View Results\n                        </button>\n                    </div>\n                </div>\n            `).join('');\n        }\n\n        function takeTest(inviteToken) {\n            window.location.href = `/take-test.html?token=${inviteToken}`;\n        }\n\n        function viewTestDetails(testId) {\n            alert(`Test details for ID: ${testId} will be implemented`);\n        }\n\n        function viewResults(testId) {\n            alert(`Results for test ID: ${testId} will be implemented`);\n        }\n\n        function logout() {\n            localStorage.removeItem('token');\n            localStorage.removeItem('user');\n            window.location.href = '/working-login.html';\n        }\n    </script>\n</body>\n</html>"