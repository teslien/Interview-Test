<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Test Invitation - Interview Test Platform</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n        \n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n        \n        .container {\n            max-width: 800px;\n            margin: 0 auto;\n        }\n        \n        .header {\n            text-align: center;\n            margin-bottom: 40px;\n            animation: fadeIn 0.6s ease-out;\n        }\n        \n        .logo {\n            width: 80px;\n            height: 80px;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            border-radius: 20px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            margin: 0 auto 20px;\n            color: white;\n            font-size: 32px;\n            font-weight: bold;\n            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);\n        }\n        \n        .header h1 {\n            font-size: 32px;\n            color: #1a202c;\n            margin-bottom: 8px;\n        }\n        \n        .header p {\n            color: #718096;\n            font-size: 16px;\n        }\n        \n        .card {\n            background: rgba(255, 255, 255, 0.9);\n            backdrop-filter: blur(12px);\n            border-radius: 20px;\n            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n            overflow: hidden;\n            animation: slideUp 0.8s ease-out;\n        }\n        \n        .card-header {\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            padding: 32px;\n            text-align: center;\n        }\n        \n        .card-header h2 {\n            font-size: 24px;\n            margin-bottom: 8px;\n        }\n        \n        .card-header p {\n            opacity: 0.9;\n            font-size: 16px;\n        }\n        \n        .card-content {\n            padding: 32px;\n        }\n        \n        .info-section {\n            background: rgba(102, 126, 234, 0.05);\n            border: 1px solid rgba(102, 126, 234, 0.1);\n            border-radius: 12px;\n            padding: 20px;\n            margin-bottom: 24px;\n        }\n        \n        .info-section h3 {\n            color: #2d3748;\n            margin-bottom: 12px;\n            display: flex;\n            align-items: center;\n            gap: 8px;\n        }\n        \n        .info-section p {\n            color: #4a5568;\n            margin: 8px 0;\n        }\n        \n        .test-details {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 16px;\n            margin: 20px 0;\n        }\n        \n        .detail-item {\n            background: white;\n            padding: 16px;\n            border-radius: 8px;\n            text-align: center;\n            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n        }\n        \n        .detail-item .number {\n            font-size: 24px;\n            font-weight: bold;\n            color: #667eea;\n            margin-bottom: 4px;\n        }\n        \n        .detail-item .label {\n            font-size: 12px;\n            color: #718096;\n            text-transform: uppercase;\n            font-weight: 600;\n        }\n        \n        .question-types {\n            display: flex;\n            flex-wrap: wrap;\n            gap: 8px;\n            margin-top: 12px;\n        }\n        \n        .question-type {\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 12px;\n            font-weight: 600;\n        }\n        \n        .important-notes {\n            background: linear-gradient(135deg, #fef5e7 0%, #fdf2e9 100%);\n            border: 1px solid #fed7aa;\n            border-radius: 12px;\n            padding: 20px;\n            margin: 24px 0;\n        }\n        \n        .important-notes h3 {\n            color: #c05621;\n            margin-bottom: 12px;\n            display: flex;\n            align-items: center;\n            gap: 8px;\n        }\n        \n        .important-notes ul {\n            color: #9c4221;\n            padding-left: 20px;\n        }\n        \n        .important-notes li {\n            margin: 8px 0;\n            line-height: 1.5;\n        }\n        \n        .schedule-section {\n            margin-top: 32px;\n            padding-top: 24px;\n            border-top: 1px solid #e2e8f0;\n        }\n        \n        .calendar-container {\n            background: white;\n            border-radius: 12px;\n            padding: 20px;\n            margin: 20px 0;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n        }\n        \n        .time-slots {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n            gap: 12px;\n            margin-top: 20px;\n        }\n        \n        .time-slot {\n            background: white;\n            border: 2px solid #e2e8f0;\n            border-radius: 8px;\n            padding: 12px;\n            text-align: center;\n            cursor: pointer;\n            transition: all 0.2s;\n            font-weight: 500;\n        }\n        \n        .time-slot:hover {\n            border-color: #667eea;\n            background: rgba(102, 126, 234, 0.05);\n        }\n        \n        .time-slot.selected {\n            border-color: #667eea;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n        }\n        \n        .btn {\n            padding: 16px 32px;\n            border: none;\n            border-radius: 12px;\n            font-weight: 600;\n            font-size: 16px;\n            cursor: pointer;\n            transition: all 0.3s;\n            text-decoration: none;\n            display: inline-flex;\n            align-items: center;\n            justify-content: center;\n            gap: 8px;\n            min-width: 200px;\n        }\n        \n        .btn-primary {\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);\n        }\n        \n        .btn-primary:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);\n        }\n        \n        .btn-success {\n            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);\n            color: white;\n            box-shadow: 0 4px 16px rgba(72, 187, 120, 0.3);\n        }\n        \n        .btn-success:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 8px 24px rgba(72, 187, 120, 0.4);\n        }\n        \n        .btn-outline {\n            background: transparent;\n            border: 2px solid #e2e8f0;\n            color: #4a5568;\n        }\n        \n        .btn-outline:hover {\n            border-color: #cbd5e0;\n            background: #f7fafc;\n        }\n        \n        .btn:disabled {\n            opacity: 0.6;\n            cursor: not-allowed;\n            transform: none !important;\n        }\n        \n        .actions {\n            display: flex;\n            gap: 16px;\n            justify-content: center;\n            margin-top: 32px;\n        }\n        \n        .selected-schedule {\n            background: linear-gradient(135deg, #e6fffa 0%, #f0fff4 100%);\n            border: 1px solid #38b2ac;\n            border-radius: 12px;\n            padding: 20px;\n            margin: 20px 0;\n            text-align: center;\n        }\n        \n        .selected-schedule h4 {\n            color: #234e52;\n            margin-bottom: 8px;\n        }\n        \n        .selected-schedule p {\n            color: #285e61;\n            font-weight: 600;\n        }\n        \n        .success-section {\n            text-align: center;\n            padding: 40px 20px;\n        }\n        \n        .success-icon {\n            width: 80px;\n            height: 80px;\n            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            margin: 0 auto 24px;\n            color: white;\n            font-size: 32px;\n        }\n        \n        .hidden {\n            display: none;\n        }\n        \n        @keyframes fadeIn {\n            from { opacity: 0; transform: translateY(20px); }\n            to { opacity: 1; transform: translateY(0); }\n        }\n        \n        @keyframes slideUp {\n            from { opacity: 0; transform: translateY(40px); }\n            to { opacity: 1; transform: translateY(0); }\n        }\n        \n        .animate-bounce {\n            animation: bounce 1s infinite;\n        }\n        \n        @keyframes bounce {\n            0%, 20%, 53%, 80%, 100% { transform: translateY(0); }\n            40%, 43% { transform: translateY(-10px); }\n            70% { transform: translateY(-5px); }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <!-- Header -->\n        <div class=\"header\">\n            <div class=\"logo\">üìù</div>\n            <h1>Test Invitation</h1>\n            <p>You've been invited to take a pre-interview assessment</p>\n        </div>\n\n        <!-- Step 1: Test Details -->\n        <div id=\"detailsStep\" class=\"card\">\n            <div class=\"card-header\">\n                <h2 id=\"testTitle\">Frontend Developer Assessment</h2>\n                <p id=\"testDescription\">Comprehensive test for frontend developers</p>\n            </div>\n            \n            <div class=\"card-content\">\n                <!-- Candidate Info -->\n                <div class=\"info-section\">\n                    <h3>üë§ Candidate Information</h3>\n                    <p><strong>Name:</strong> <span id=\"candidateName\">John Doe</span></p>\n                    <p><strong>Email:</strong> <span id=\"candidateEmail\">john@example.com</span></p>\n                </div>\n                \n                <!-- Test Details -->\n                <div class=\"info-section\">\n                    <h3>üìã Test Details</h3>\n                    <div class=\"test-details\">\n                        <div class=\"detail-item\">\n                            <div class=\"number\" id=\"questionCount\">10</div>\n                            <div class=\"label\">Questions</div>\n                        </div>\n                        <div class=\"detail-item\">\n                            <div class=\"number\" id=\"testDuration\">90</div>\n                            <div class=\"label\">Minutes</div>\n                        </div>\n                    </div>\n                    \n                    <p><strong>Question Types:</strong></p>\n                    <div class=\"question-types\" id=\"questionTypes\">\n                        <span class=\"question-type\">Multiple Choice</span>\n                        <span class=\"question-type\">Coding</span>\n                        <span class=\"question-type\">Essay</span>\n                    </div>\n                </div>\n                \n                <!-- Important Notes -->\n                <div class=\"important-notes\">\n                    <h3>‚ö†Ô∏è Important Guidelines</h3>\n                    <ul>\n                        <li>Ensure you have a stable internet connection</li>\n                        <li>You will be monitored via video call during the test</li>\n                        <li>The test must be completed in one session</li>\n                        <li>Have your ID ready for verification</li>\n                        <li>Use a quiet environment with good lighting</li>\n                        <li>Do not switch browser tabs or applications during the test</li>\n                    </ul>\n                </div>\n                \n                <div class=\"actions\">\n                    <button class=\"btn btn-primary\" onclick=\"showScheduleStep()\">\n                        üìÖ Schedule Test\n                    </button>\n                </div>\n            </div>\n        </div>\n\n        <!-- Step 2: Schedule Test -->\n        <div id=\"scheduleStep\" class=\"card hidden\">\n            <div class=\"card-header\">\n                <h2>Schedule Your Test</h2>\n                <p>Choose a convenient date and time for your assessment</p>\n            </div>\n            \n            <div class=\"card-content\">\n                <div class=\"schedule-section\">\n                    <h3>üìÖ Select Date</h3>\n                    <div class=\"calendar-container\">\n                        <input type=\"date\" id=\"testDate\" \n                               min=\"\" \n                               style=\"width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 16px;\"\n                               onchange=\"loadTimeSlots()\">\n                    </div>\n                    \n                    <div id=\"timeSlotsSection\" class=\"hidden\">\n                        <h3>‚è∞ Select Time</h3>\n                        <div class=\"time-slots\" id=\"timeSlots\">\n                            <!-- Time slots will be populated here -->\n                        </div>\n                    </div>\n                    \n                    <div id=\"selectedSchedule\" class=\"selected-schedule hidden\">\n                        <h4>üìã Selected Schedule</h4>\n                        <p id=\"scheduleDisplay\"></p>\n                    </div>\n                </div>\n                \n                <div class=\"actions\">\n                    <button class=\"btn btn-outline\" onclick=\"showDetailsStep()\">\n                        ‚Üê Back\n                    </button>\n                    <button class=\"btn btn-success\" id=\"confirmBtn\" onclick=\"confirmSchedule()\" disabled>\n                        ‚úÖ Confirm Schedule\n                    </button>\n                </div>\n            </div>\n        </div>\n\n        <!-- Step 3: Confirmation -->\n        <div id=\"confirmationStep\" class=\"card hidden\">\n            <div class=\"card-content\">\n                <div class=\"success-section\">\n                    <div class=\"success-icon animate-bounce\">‚úÖ</div>\n                    <h2 style=\"color: #1a202c; margin-bottom: 16px;\">Test Scheduled Successfully!</h2>\n                    <p style=\"color: #4a5568; margin-bottom: 32px;\">Your test has been scheduled and confirmed.</p>\n                    \n                    <div class=\"selected-schedule\">\n                        <h4>üìÖ Your Test Schedule</h4>\n                        <p id=\"finalScheduleDisplay\"></p>\n                    </div>\n                    \n                    <div class=\"important-notes\">\n                        <h3>üìã What's Next?</h3>\n                        <ul>\n                            <li>You'll receive a confirmation email shortly</li>\n                            <li>Join the test 5 minutes before your scheduled time</li>\n                            <li>Ensure your camera and microphone are working</li>\n                            <li>Have a valid ID ready for verification</li>\n                            <li>You can access the test from this invitation link</li>\n                        </ul>\n                    </div>\n                    \n                    <div class=\"actions\">\n                        <button class=\"btn btn-primary\" onclick=\"goToLogin()\">\n                            üöÄ Go to Dashboard\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        const API_BASE = 'https://interview-verify.preview.emergentagent.com/api';\n        \n        // Get token from URL parameters\n        const urlParams = new URLSearchParams(window.location.search);\n        const inviteToken = urlParams.get('token') || window.location.pathname.split('/').pop();\n        \n        let inviteData = null;\n        let selectedDate = null;\n        let selectedTime = null;\n\n        // Mock data for demonstration\n        const mockInviteData = {\n            invite: {\n                id: 'mock-invite-1',\n                applicant_name: 'John Doe',\n                applicant_email: 'john.doe@example.com',\n                status: 'sent',\n                invite_token: 'mock-token-1'\n            },\n            test: {\n                id: 'mock-test-1',\n                title: 'Frontend Developer Assessment',\n                description: 'Comprehensive test covering React, JavaScript, and web development fundamentals',\n                duration_minutes: 90,\n                questions: [\n                    { type: 'multiple_choice', points: 1 },\n                    { type: 'multiple_choice', points: 1 },\n                    { type: 'coding', points: 3 },\n                    { type: 'coding', points: 3 },\n                    { type: 'essay', points: 2 }\n                ]\n            }\n        };\n\n        // Initialize page\n        document.addEventListener('DOMContentLoaded', async () => {\n            await loadInviteData();\n            initializeDatePicker();\n        });\n\n        async function loadInviteData() {\n            try {\n                // In real implementation:\n                // const response = await fetch(`${API_BASE}/invites/token/${inviteToken}`);\n                // inviteData = await response.json();\n                \n                // For now, use mock data\n                inviteData = mockInviteData;\n                \n                populateTestDetails();\n                \n            } catch (error) {\n                console.error('Failed to load invite data:', error);\n                alert('Invalid or expired invite link');\n            }\n        }\n\n        function populateTestDetails() {\n            const { invite, test } = inviteData;\n            \n            // Update test info\n            document.getElementById('testTitle').textContent = test.title;\n            document.getElementById('testDescription').textContent = test.description;\n            document.getElementById('candidateName').textContent = invite.applicant_name;\n            document.getElementById('candidateEmail').textContent = invite.applicant_email;\n            document.getElementById('questionCount').textContent = test.questions.length;\n            document.getElementById('testDuration').textContent = test.duration_minutes;\n            \n            // Update question types\n            const questionTypes = [...new Set(test.questions.map(q => q.type))];\n            const typesContainer = document.getElementById('questionTypes');\n            typesContainer.innerHTML = questionTypes.map(type => \n                `<span class=\"question-type\">${type.replace('_', ' ').toUpperCase()}</span>`\n            ).join('');\n        }\n\n        function initializeDatePicker() {\n            const dateInput = document.getElementById('testDate');\n            const today = new Date();\n            const tomorrow = new Date(today);\n            tomorrow.setDate(tomorrow.getDate() + 1);\n            \n            dateInput.min = tomorrow.toISOString().split('T')[0];\n        }\n\n        function showScheduleStep() {\n            document.getElementById('detailsStep').classList.add('hidden');\n            document.getElementById('scheduleStep').classList.remove('hidden');\n        }\n\n        function showDetailsStep() {\n            document.getElementById('scheduleStep').classList.add('hidden');\n            document.getElementById('detailsStep').classList.remove('hidden');\n        }\n\n        function loadTimeSlots() {\n            const dateValue = document.getElementById('testDate').value;\n            if (!dateValue) return;\n            \n            selectedDate = dateValue;\n            const timeSlotsSection = document.getElementById('timeSlotsSection');\n            const timeSlotsContainer = document.getElementById('timeSlots');\n            \n            // Available time slots\n            const timeSlots = [\n                '09:00', '09:30', '10:00', '10:30', '11:00', '11:30',\n                '14:00', '14:30', '15:00', '15:30', '16:00', '16:30'\n            ];\n            \n            timeSlotsContainer.innerHTML = timeSlots.map(time => \n                `<div class=\"time-slot\" onclick=\"selectTimeSlot('${time}', this)\">${time}</div>`\n            ).join('');\n            \n            timeSlotsSection.classList.remove('hidden');\n        }\n\n        function selectTimeSlot(time, element) {\n            // Remove selected class from all time slots\n            document.querySelectorAll('.time-slot').forEach(slot => \n                slot.classList.remove('selected')\n            );\n            \n            // Add selected class to clicked slot\n            element.classList.add('selected');\n            \n            selectedTime = time;\n            updateScheduleDisplay();\n            \n            // Enable confirm button\n            document.getElementById('confirmBtn').disabled = false;\n        }\n\n        function updateScheduleDisplay() {\n            if (selectedDate && selectedTime) {\n                const date = new Date(selectedDate);\n                const dateStr = date.toLocaleDateString('en-US', { \n                    weekday: 'long', \n                    year: 'numeric', \n                    month: 'long', \n                    day: 'numeric' \n                });\n                \n                const displayText = `${dateStr} at ${selectedTime}`;\n                document.getElementById('scheduleDisplay').textContent = displayText;\n                document.getElementById('selectedSchedule').classList.remove('hidden');\n            }\n        }\n\n        async function confirmSchedule() {\n            if (!selectedDate || !selectedTime) {\n                alert('Please select both date and time');\n                return;\n            }\n\n            try {\n                // Prepare schedule data\n                const scheduleDateTime = new Date(`${selectedDate}T${selectedTime}:00`);\n                \n                // In real implementation:\n                // await fetch(`${API_BASE}/invites/token/${inviteToken}/schedule`, {\n                //     method: 'POST',\n                //     headers: { 'Content-Type': 'application/json' },\n                //     body: JSON.stringify({ scheduled_date: scheduleDateTime.toISOString() })\n                // });\n                \n                console.log('Test scheduled for:', scheduleDateTime.toISOString());\n                \n                // Update final display\n                const dateStr = scheduleDateTime.toLocaleDateString('en-US', { \n                    weekday: 'long', \n                    year: 'numeric', \n                    month: 'long', \n                    day: 'numeric' \n                });\n                const timeStr = scheduleDateTime.toLocaleTimeString('en-US', {\n                    hour: '2-digit',\n                    minute: '2-digit'\n                });\n                \n                document.getElementById('finalScheduleDisplay').textContent = `${dateStr} at ${timeStr}`;\n                \n                // Show confirmation step\n                document.getElementById('scheduleStep').classList.add('hidden');\n                document.getElementById('confirmationStep').classList.remove('hidden');\n                \n            } catch (error) {\n                console.error('Failed to schedule test:', error);\n                alert('Failed to schedule test. Please try again.');\n            }\n        }\n\n        function goToLogin() {\n            window.location.href = '/working-login.html';\n        }\n    </script>\n</body>\n</html>"